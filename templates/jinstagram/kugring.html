<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Diet_plan</title>


    <!-- lordicon 아이콘 -->
    <script src="https://cdn.lordicon.com/lordicon-1.1.0.js"></script>
    <!-- 구글 아이콘 -->
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"/>
    <!-- 구글 폰트 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lilita+One&family=Playpen+Sans:wght@700&family=Titan+One&family=Varela+Round&display=swap"
          rel="stylesheet">
    <!-- 차트 링크 -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'kugring/header_nav.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'kugring/made_box.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'kugring/number-swiper.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'kugring/bootstrap_custom.min.css' %}">
    <script src="{% static 'kugring/number-swiper.js' %}" type="text/javascript"></script>
    <script src="{% static 'kugring/chartjs-plugin-datalabels.js' %}" type="text/javascript"></script>


</head>


<!-- 상단의 내비 부트스트랩 -->
<nav id="navbar-example2" class="navbar bg-body-tertiary px-3">
    <img style="margin-left: 3rem; height: 30px; transform: scale(1.5);" src="{% get_media_prefix %}붕어빵 로고"></img>
    <div style="font-size: 15px; color: #ff9900; font-weight: bolder"> D-701</div>
    <label class="switch">
        <input type="checkbox">
        <span class="slider"></span>
    </label>
</nav>

<div class="main_content">

    <!-- 내비 버튼 카드박스 -->
    <div style="padding-top: 15px; background-color: inherit">
        <div class="first_card_box" style="display: flex; flex-direction: column; justify-content: center; align-items: center; height:3.2rem;">
            <div style="width: 90%; height:15rem; margin-top: 0.3rem; display: flex; flex-direction: row; justify-content: center; overflow: hidden">
                <!-- 메뉴 타이1`틀 +{필요데이터: 타이틀이름, 그래프퍼센트, 그래프색상, 각종_colume} -->
                {% for title in nav_title %}
                    <div class="animationButton dropdown-start"
                         style="display: flex; flex-direction: column;width: 20vw; margin-left: auto; margin-right: auto;">
                        <!-- 버튼의 높의 조절 -->
                        <button class="dropdown btn btn-secondary dropdown-center" type="button"
                                data-bs-toggle="dropdown"
                                aria-expanded="true"
                                style="width: auto; height: 2.9rem; border: 0.2rem solid; background-color: rgb(255,214,214); border-radius: 0.7rem; font-size: 0.7rem; font-weight: bold; padding: 0">
                            <lord-icon style="margin: 0.1rem 0 0.1rem 0; height: 1.8rem;"
                                    {% if title == 'diet' %}
                                       src="https://cdn.lordicon.com/bjbrpoou.json"
                                    {% elif title == 'exercise' %}
                                       src="https://cdn.lordicon.com/xjronrda.json"
                                    {% elif title == 'morning_record' %}
                                       src="https://cdn.lordicon.com/ogmjwaqx.json"
                                    {% elif title == 'evening_record' %}
                                       src="https://cdn.lordicon.com/qwjfapmb.json"
                                    {% endif %}
                                       delay="1000"
                                       trigger="loop">
                            </lord-icon>
                            <!-- 그래프의 타이틀 -->
                            <div class="progress" role="progressbar"
                                 aria-label="Animated striped example"
                                 style="height: 0.3rem; margin: -0.3rem 0.3rem 0.2rem 0.3rem; border: 0.1rem solid #ffffff;">
                                <!-- 실질적인 그래프 수치 -->
                                <div class="progress-bar_color progress-bar-striped progress-bar-animated"
                                     style="width: 40%;"></div>
                            </div>
                            <div class="dropdown-menu title_card_border"
                                 style="width:90vw; padding: 0; border-width: 0.15rem;">
                                <!-- 아직 이미지를 DB에서 불러올 방법을 모른다 + 데이터 인풋을 어떻게 [모달]을 아직 설정하지 못했다 -->
                                {% if title == 'diet' %}
                                    <div class="dropdown-img"
                                         style="scroll-snap-align: center;  width: 148vw; display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: space-evenly; padding: 0.3rem 0 0.8rem 0;overflow: scroll;">
                                        {% for tag in diet %}
                                            <div class="card" style="border: 3px solid #ff8888; margin-top: 5px;">
                                                <div style="border-top-left-radius: 3px; border-bottom-right-radius: 4px; position: fixed; opacity: 0.9; margin:0; display: flex; justify-content: center; align-items: center;
                                            flex-shrink: 0;  width: 44px;  height: 17px; padding-left: 6px; padding-right: 6px; font-size: 12px; line-height: 120%; color: rgba(255, 255, 255, 0.804); background: rgb(239,133,121);">{{ tag }}</div>
                                                <div>
                                                    <img class="card-img-top {{ title }}_img_box"
                                                         style="width:6.3rem;"
                                                         onclick="openFileUploader('{{ title }}','{{ tag }}')"
                                                            {% if tag == '아침' %}
                                                                {% if not image_data_아침.image %}
                                                                    {#                                                         src="https://i.pinimg.com/564x/42/25/32/4225321742470a5b5c4de7b2db70f311.jpg"#}
                                                         src="https://i.pinimg.com/736x/57/e2/91/57e2910eb89912de68d4c6e75502453c.jpg"
                                                                {% else %}
                                                         src="{% get_media_prefix %}{{ image_data_아침.image }}"
                                                                {% endif %}
                                                            {% elif tag == '점심' %}
                                                                {% if not image_data_점심.image %}
                                                                    {#                                                         src="https://i.pinimg.com/564x/21/34/7e/21347ea451b56cf610e84ddc12e0435d.jpg"#}
                                                         src="https://i.pinimg.com/736x/29/82/88/298288b186ed163def4c8560a90d7774.jpg"
                                                                {% else %}
                                                         src="{% get_media_prefix %}{{ image_data_점심.image }}"
                                                                {% endif %}
                                                            {% elif tag == '저녁' %}
                                                                {% if not image_data_저녁.image %}
                                                                    {#                                                         src="https://i.pinimg.com/564x/97/2b/26/972b26730d4daf1a04ea50c04023c193.jpg"#}
                                                         src="https://i.pinimg.com/736x/8a/2f/54/8a2f54bcb722cf797be0fdcbc2b703dd.jpg"
                                                                {% else %}
                                                         src="{% get_media_prefix %}{{ image_data_저녁.image }}"
                                                                {% endif %}
                                                            {% elif tag == '기타1' %}
                                                                {% if not image_data_기타1.image %}
                                                         src="https://i.pinimg.com/736x/b8/a0/b8/b8a0b8d2ad14d97882571f53c7c3eec4.jpg"
                                                                {% else %}
                                                         src="{% get_media_prefix %}{{ image_data_기타1.image }}"
                                                                {% endif %}
                                                            {% elif tag == '기타2' %}
                                                                {% if not image_data_기타2.image %}
                                                         src="https://i.pinimg.com/564x/c9/48/f4/c948f4b0bab9c602c66ac42f0fad2a67.jpg"
                                                                {% else %}
                                                         src="{% get_media_prefix %}{{ image_data_기타2.image }}"
                                                                {% endif %}
                                                            {% endif %}>
                                                </div>
                                                <div class="card-body"
                                                     style=" color: rgb(255,143,63); padding: 0; height: auto; border-top: 1px solid #EF8579FF">
                                                    <div style="display: flex; flex-direction: column; justify-content: space-evenly; align-items: center">
                                                        <div style="display: flex; justify-content: center; align-items: center; flex-shrink: 0;  width: 85px; height: 30px; font-weight: 1000;  border-radius: 3px; font-size: 15px; line-height: 120%; color: rgb(239,133,121); border: 2px solid rgb(239,133,121); margin: 8px 0 ;">
                                                            {% if tag == '아침' %}
                                                                {% if not image_data_아침.number_data %}
                                                                    ◝( ˙꒳˙ )◜
                                                                {% else %}
                                                                    {{ image_data_아침.number_data }}kcal
                                                                {% endif %}

                                                            {% elif tag == '점심' %}
                                                                {% if not image_data_점심.number_data %}
                                                                    ◝( ˙꒳˙ )◜
                                                                {% else %}
                                                                    {{ image_data_점심.number_data }}kcal
                                                                {% endif %}

                                                            {% elif tag == '저녁' %}
                                                                {% if not image_data_저녁.number_data %}
                                                                    ◝( ˙꒳˙ )◜
                                                                {% else %}
                                                                    {{ image_data_저녁.number_data }}kcal
                                                                {% endif %}

                                                            {% elif tag == '기타1' %}
                                                                {% if not image_data_기타1.number_data %}
                                                                    ◝( ˙꒳˙ )◜
                                                                {% else %}
                                                                    {{ image_data_기타1.number_data }}kcal
                                                                {% endif %}

                                                            {% elif tag == '기타2' %}
                                                                {% if not image_data_기타2.number_data %}
                                                                    ◝( ˙꒳˙ )◜
                                                                {% else %}
                                                                    {{ image_data_기타2.number_data }}kcal
                                                                {% endif %}
                                                            {% endif %}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        {% endfor %}
                                    </div>
                                {% elif title == 'exercise' %}
                                    <div class="dropdown-img"
                                         style="width: 148vw; display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: space-evenly; padding: 0.3rem 0 0.8rem 0">
                                        {% for tag in exercise %}
                                            <div class="card"
                                                 style="border: 3px solid rgb(239,167,115);  margin-top: 5px;">
                                                <div style="border-top-left-radius: 3px; border-bottom-right-radius: 4px; position: fixed; margin:0; display: flex; justify-content: center; align-items: center; flex-shrink: 0;  width: 46px;  height: 17px; padding-left: 4px; padding-right: 4px; font-size: 12px; line-height: 120%; color: rgb(255,255,255); background: rgba(255,189,47,0.75);">{{ tag }}</div>
                                                <div>
                                                    <img class="card-img-top {{ title }}_img_box"
                                                         style="width:6.3rem;"
                                                         onclick="openFileUploader('{{ title }}','{{ tag }}')"
                                                            {% if tag == '유산소' %}
                                                                {% if not image_data_유산소.image %}
                                                         src="https://i.pinimg.com/564x/85/29/bb/8529bb08bd89c336522ce07ec4750016.jpg"
                                                                {% else %}
                                                         src="{% get_media_prefix %}{{ image_data_유산소.image }}"
                                                                {% endif %}

                                                            {% elif tag == '웨이트' %}
                                                                {% if not image_data_웨이트.image %}
                                                         src="https://i.pinimg.com/564x/fd/09/01/fd09019e28d26a321183d7ce97e00efc.jpg"
                                                                {% else %}
                                                         src="{% get_media_prefix %}{{ image_data_웨이트.image }}"
                                                                {% endif %}

                                                            {% elif tag == '만보기' %}
                                                                {% if not image_data_만보기.image %}
                                                         src="https://i.pinimg.com/736x/dc/54/67/dc54673fa25d77bd246499ea6713d319.jpg"
                                                                {% else %}
                                                         src="{% get_media_prefix %}{{ image_data_만보기.image }}"
                                                                {% endif %}

                                                            {% elif tag == '눈캠' %}
                                                                {% if not image_data_눈캠.image %}
                                                         src="https://i.pinimg.com/736x/7b/f8/e3/7bf8e3b3b51bb192eda96655e2ca4cd0.jpg"
                                                                {% else %}
                                                         src="{% get_media_prefix %}{{ image_data_눈캠.image }}"
                                                                {% endif %}

                                                            {% elif tag == '크로키' %}
                                                                {% if not image_data_크로키.image %}
                                                         src="https://i.pinimg.com/736x/d6/a2/45/d6a245aac8fed676c5fcd1d3cf1e136c.jpg"
                                                                {% else %}
                                                         src="{% get_media_prefix %}{{ image_data_크로키.image }}"
                                                                {% endif %}
                                                            {% endif %}>
                                                </div>
                                                <div class="card-body"
                                                     style=" color: rgb(255,181,128); padding: 0; height: auto; border-top: 1px solid #ffb580">
                                                    <div style="display: flex; flex-direction: column; justify-content: space-evenly; align-items: center">
                                                        <div style="display: flex; justify-content: center; align-items: center; flex-shrink: 0;  width: 85px; height: 30px; font-weight: 1000;  border-radius: 3px; font-size: 15px; line-height: 120%; color: rgb(255,181,128); border: 2px solid rgb(255,181,128); margin: 8px 0 ;">
                                                            {% if tag == '유산소' %}
                                                                {% if not image_data_유산소.number_data %}
                                                                    ◝( ˙꒳˙ )◜
                                                                {% else %}
                                                                    {{ image_data_유산소.number_data }}kcal
                                                                {% endif %}

                                                            {% elif tag == '웨이트' %}
                                                                {% if not image_data_웨이트.number_data %}
                                                                    ◝( ˙꒳˙ )◜
                                                                {% else %}
                                                                    {{ image_data_웨이트.number_data }}kcal
                                                                {% endif %}

                                                            {% elif tag == '만보기' %}
                                                                {% if not image_data_만보기.number_data %}
                                                                    ◝( ˙꒳˙ )◜
                                                                {% else %}
                                                                    {{ image_data_만보기.number_data }}kcal
                                                                {% endif %}

                                                            {% elif tag == '눈캠' %}
                                                                {% if not image_data_눈캠.number_data %}
                                                                    ◝( ˙꒳˙ )◜
                                                                {% else %}
                                                                    {{ image_data_눈캠.number_data }}kcal
                                                                {% endif %}

                                                            {% elif tag == '크로키' %}
                                                                {% if not image_data_크로키.number_data %}
                                                                    ◝( ˙꒳˙ )◜
                                                                {% else %}
                                                                    {{ image_data_크로키.number_data }}kcal
                                                                {% endif %}
                                                            {% endif %}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        {% endfor %}
                                    </div>
                                {% elif title == 'morning_record' %}
                                    <div class="dropdown-img"
                                         style="width: 177vw; display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: space-evenly; padding: 0.3rem 0 0.8rem 0">
                                        {% for tag in morning_record %}
                                            <div class="card"
                                                 style="border: 3px solid rgba(81,173,61,0.9);  margin-top: 5px;">
                                                <div style="border-top-left-radius: 3px; border-bottom-right-radius: 4px; position: fixed; opacity: 0.9; margin:0; display: flex; justify-content: center; align-items: center; flex-shrink: 0;  width: 60px;  height: 17px; padding-left: 4px; padding-right: 4px; font-size: 12px; line-height: 120%; color: rgba(255, 255, 255, 0.804); background: rgba(48,159,70,0.9);">{{ tag }}</div>
                                                <div>
                                                    <img class="card-img-top {{ title }}_img_box"
                                                         style="width:6.3rem;"
                                                         onclick="openFileUploader('{{ title }}','{{ tag }}')"
                                                            {% if tag == '체중' %}
                                                         src="https://i.pinimg.com/736x/67/be/ae/67beae56f14d92fb8d2503d57be6595a.jpg"
                                                            {% elif tag == '허리둘레' %}
                                                         src="https://i.pinimg.com/736x/17/82/f4/1782f42233a3bd919d7d4fb0894abe94.jpg"
                                                            {% elif tag == '수면시간' %}
                                                         src="https://i.pinimg.com/736x/df/0f/46/df0f467dbdd780b752b37b7b494a2a1f.jpg"
                                                            {% elif tag == '수면만족도' %}
                                                         src="https://i.pinimg.com/564x/f2/7a/cf/f27acf04505caaa6ac56acd6a443a3de.jpg"
                                                            {% elif tag == '근육통' %}
                                                         src="https://i.pinimg.com/564x/16/41/33/164133dae0fa54f10cc499ccfbd62cd3.jpg"
                                                            {% elif tag == '구내염' %}
                                                         src="https://i.pinimg.com/564x/87/ee/d2/87eed2980b1b99cb8ae51db47e45627a.jpg"
                                                            {% endif %}>
                                                </div>
                                                <div class="card-body"
                                                     style=" color: rgba(93,164,70,0.9); padding: 0; height: auto; border-top: 1px solid rgba(115,194,89,0.9)">
                                                    <div style="display: flex; flex-direction: column; justify-content: space-evenly; align-items: center">
                                                        <div style="display: flex; justify-content: center; align-items: center; flex-shrink: 0;  width: 85px; height: 30px; font-weight: 1000;  border-radius: 3px; font-size: 15px; line-height: 120%; color: rgba(90,166,66,0.9); border: 2px solid rgba(86,169,59,0.9); margin: 8px 0 ;">
                                                            {% if tag == '체중' %}
                                                                {% if not image_data_체중.number_data %}
                                                                    ◝( ˙꒳˙ )◜
                                                                {% else %}
                                                                    {{ image_data_체중.number_data }}kcal
                                                                {% endif %}

                                                            {% elif tag == '허리둘레' %}
                                                                {% if not image_data_허리둘레.number_data %}
                                                                    ◝( ˙꒳˙ )◜
                                                                {% else %}
                                                                    {{ image_data_허리둘레.number_data }}kcal
                                                                {% endif %}

                                                            {% elif tag == '수면시간' %}
                                                                {% if not image_data_수면시간.number_data %}
                                                                    ◝( ˙꒳˙ )◜
                                                                {% else %}
                                                                    {{ image_data_수면시간.number_data }}kcal
                                                                {% endif %}

                                                            {% elif tag == '수면만족도' %}
                                                                {% if not image_data_수면만족도.number_data %}
                                                                    ◝( ˙꒳˙ )◜
                                                                {% else %}
                                                                    {{ image_data_수면만족도.number_data }}kcal
                                                                {% endif %}

                                                            {% elif tag == '근육통' %}
                                                                {% if not image_data_근육통.number_data %}
                                                                    ◝( ˙꒳˙ )◜
                                                                {% else %}
                                                                    {{ image_data_근육통.number_data }}kcal
                                                                {% endif %}
                                                            {% elif tag == '구내염' %}
                                                                {% if not image_data_구내염.number_data %}
                                                                    ◝( ˙꒳˙ )◜
                                                                {% else %}
                                                                    {{ image_data_구내염.number_data }}kcal
                                                                {% endif %}
                                                            {% endif %}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        {% endfor %}
                                    </div>
                                {% elif title == 'evening_record' %}
                                    <div class="dropdown-img"
                                         style="width: 176.5vw; display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: space-evenly; padding: 0.3rem 0 0.8rem 0">
                                        {% for tag in evening_record %}
                                            <div class="card"
                                                 style="border: 3px solid rgba(74,64,168,0.7); margin-top: 5px;">
                                                <div style="border-top-left-radius: 3px; border-bottom-right-radius: 4px; position: fixed; opacity: 0.9; margin:0; display: flex; justify-content: center; align-items: center; flex-shrink: 0;  width: 60px;  height: 17px; padding-left: 6px; padding-right: 6px; font-size: 12px; line-height: 120%; color: rgba(255, 255, 255, 0.804); background: rgb(116,103,234);">{{ tag }}</div>
                                                <div>
                                                    <img class="card-img-top {{ title }}_img_box"
                                                         style="width:6.3rem;"
                                                         onclick="openFileUploader('{{ title }}','{{ tag }}')"
                                                            {% if tag == '식사균형' %}
                                                         src="https://i.pinimg.com/564x/f5/fc/5e/f5fc5e2cfb73b98794e34f24dd599370.jpg"
                                                            {% elif tag == '식사시간' %}
                                                         src="https://i.pinimg.com/564x/54/25/c6/5425c6c2fce708c37a878b44f09f600c.jpg"
                                                            {% elif tag == '스트레스' %}
                                                         src="https://i.pinimg.com/564x/d2/a6/8b/d2a68b5ff7bd3b235cff21d03108a2e3.jpg"
                                                            {% elif tag == '피로감' %}
                                                         src="https://i.pinimg.com/564x/b0/e5/f4/b0e5f4422c0a5629f65ce368c40b3407.jpg"
                                                            {% elif tag == '소화불량' %}
                                                         src="https://i.pinimg.com/564x/04/a1/e3/04a1e306ef708dac2098c777dbcb3953.jpg"
                                                            {% elif tag == '불면증' %}
                                                         src="https://i.pinimg.com/564x/ed/af/55/edaf5541dc1225ed19933cd0f8c407df.jpg"
                                                            {% endif %}>
                                                </div>
                                                <div class="card-body"
                                                     style=" color: rgb(255,143,63); padding: 0; height: auto; border-top: 1px solid #7467ea">
                                                    <div style="display: flex; flex-direction: column; justify-content: space-evenly; align-items: center">
                                                        <div style="display: flex; justify-content: center; align-items: center; flex-shrink: 0;  width: 85px; height: 30px; font-weight: 1000;  border-radius: 3px; font-size: 15px; line-height: 120%; color: rgb(116,103,234); border: 2px solid rgb(116,103,234); margin: 8px 0 ;">
                                                            {% if tag == '식사균형' %}
                                                                {% if not image_data_식사균형.number_data %}
                                                                    ◝( ˙꒳˙ )◜
                                                                {% else %}
                                                                    {{ image_data_식사균형.number_data }}kcal
                                                                {% endif %}

                                                            {% elif tag == '식사시간' %}
                                                                {% if not image_data_식사시간.number_data %}
                                                                    ◝( ˙꒳˙ )◜
                                                                {% else %}
                                                                    {{ image_data_식사시간.number_data }}kcal
                                                                {% endif %}

                                                            {% elif tag == '스트레스' %}
                                                                {% if not image_data_스트레스.number_data %}
                                                                    ◝( ˙꒳˙ )◜
                                                                {% else %}
                                                                    {{ image_data_스트레스.number_data }}kcal
                                                                {% endif %}

                                                            {% elif tag == '피로감' %}
                                                                {% if not image_data_피로감.number_data %}
                                                                    ◝( ˙꒳˙ )◜
                                                                {% else %}
                                                                    {{ image_data_피로감.number_data }}kcal
                                                                {% endif %}

                                                            {% elif tag == '소화불량' %}
                                                                {% if not image_data_소화불량.number_data %}
                                                                    ◝( ˙꒳˙ )◜
                                                                {% else %}
                                                                    {{ image_data_소화불량.number_data }}kcal
                                                                {% endif %}
                                                            {% elif tag == '불면증' %}
                                                                {% if not image_data_불면증.number_data %}
                                                                    ◝( ˙꒳˙ )◜
                                                                {% else %}
                                                                    {{ image_data_불면증.number_data }}kcal
                                                                {% endif %}
                                                            {% endif %}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                        </button>
                    </div>
                    <div id="title_modal" class="modal_overlay">
                        <div id="modal_window" class="modal_window"
                             style="height: 450px; border: 0.3rem solid; border-radius: 0.7rem; padding: 12px;">
                            <div id="content_card" class="card" style="border: solid;">
                                <div id="padding_12px" style="padding: 12px;">
                                    <!-- 상단 body -->
                                    <div id="top_content"
                                         style="display: flex; flex-direction:row; justify-content: space-between; padding-bottom: 10px;">

                                        <!-- 날짜 선택 -->
                                        <input id="dateInput"
                                               style="width: 120px; font-weight: 600; border: 0.15rem solid; border-radius: 0.3rem;"
                                               type="date" value="" placeholder="yyyy-mm-dd">
                                        <input type="text" id="select_result" value="def"
                                               style="display: none;">
                                        <div style="display: flex; flex-direction: row;">
                                            <!-- 항목선택 -->
                                            <select id="tag_select" name="tag_select" class="form-select"
                                                    style="width: 80px; font-size: 1rem; font-weight: 600; border: solid; border-radius: 0.3rem; padding: 0; margin-right: 5px;">
                                            </select>
                                            <!-- 모달 닫기 아이콘 -->
                                            <button id="btn_close" class="btn-close"
                                                    style=" background-color: #ffffff; border: solid"
                                                    type="button" aria-label="Close"></button>
                                        </div>
                                    </div>
                                    <!-- 중간 body -->
                                    <div id="middle_content"
                                         style="display: flex; flex-direction: column; justify-content: space-between; align-items: center">
                                        <div id="uploadArea" class="card" onclick="imageInputUploader()"
                                             style="width: 200px; height:200px;">
                                        </div>
                                        <input id="imageInput" type="file" accept="image/*" style="display: none;">
                                        <div style="display: flex; flex-direction: column; justify-content: space-around; align-items: center">

                                            <div id="myNumberSwiper" class="number-swiper" data-value=""
                                                 style="font-size: 5rem; width: 230px; background-color: #ffffff; display: flex; flex-direction: row; justify-content: center; align-items: center; padding:0.3rem; border: 0.15rem solid; border-radius: 0.3rem">
                                                {% for i in "123" %}
                                                    <ol class="number-swiper-column number-swiper-column-{{ i }}"
                                                        data-column="{{ i }}">
                                                        <li class="last-zero">0</li>
                                                        <li>1</li>
                                                        <li>2</li>
                                                        <li>3</li>
                                                        <li>4</li>
                                                        <li>5</li>
                                                        <li>6</li>
                                                        <li>7</li>
                                                        <li>8</li>
                                                        <li>9</li>
                                                        <li id="center-{{ i }}" class="number-swiper-active-number">0
                                                        </li>
                                                        <li>1</li>
                                                        <li>2</li>
                                                        <li>3</li>
                                                        <li>4</li>
                                                        <li>5</li>
                                                        <li>6</li>
                                                        <li>7</li>
                                                        <li>8</li>
                                                        <li>9</li>
                                                        <li class="last-zero">0</li>
                                                    </ol>
                                                {% endfor %}
                                                <input class="number-swiper-value" type="hidden" min="0" max="999">
                                                <div id="number_unit" style="font-size: 1rem; font-weight: 600;">
                                                </div>
                                            </div>
                                            <script>
                                                var numbers = new NumberSwiper('myNumberSwiper');
                                            </script>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="card_btn_border"
                                 style="margin-top: 10px; width: 307px; border: 0.3rem solid;  border-radius: 0.7rem; font-size: 0.7rem; font-weight: bold;">
                                <button id="modal_upload_btn" class="btn"
                                        style="width: 297px; color: white; font-weight: 1000;border: 0.15rem solid #ffffff; border-radius: 0.5rem;">
                                    업로드
                                </button>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>

        </div>
    </div>
    <!-- 메인 바디 -->
    <div style="display: flex;flex-direction: row; justify-content: center; align-items: center; width: 100vw; margin:1rem 0;">
        <!-- 노랑 bord -->
        <div style="display: flex;flex-direction: row; justify-content: center; align-items: start; padding-top: 1rem; width: 95vw; height: auto; border:0.3rem solid #f1a633; border-radius: 2.5rem; background-color: #ffdc7b">
            <!-- 갈색 bord -->
            <div style="display: flex;flex-direction: column; justify-content: space-between; width: 85vw; height: auto; margin-bottom: 1rem;
            border:0.1rem solid #ccb489; border-radius: 1.5rem; background-color: #f6ead5; box-shadow:0 0 0 5px #daa36d">
                <!-- 목표량 차트 -->
                <div style="display: flex; flex-direction: column; justify-content: space-evenly; align-items: center; margin: 0.5rem 1rem 0.3rem 1rem; width: 75vw; height: auto; background-color: #f1d195; border:0.1rem solid #b48f52; border-radius: 0.7rem;">
                    <div style="width: 60vw;margin: 0.2rem; display: flex;flex-direction: row; justify-content: space-between; align-items: center">
                        <div style="font-family: 'Titan One', sans-serif; color:white; -webkit-text-stroke: 1.5px #ff9c54;">
                            target
                        </div>
                        <div class="progress" aria-valuemax="100"
                             style="border: 0.2rem solid orange; border-radius: 35px; width: 40vw; height: 10px;">
                            <div class="progress-bar progress-bar-striped bg-warning progress-bar-animated"
                                 style="width: 75%"></div>
                        </div>
                    </div>
                </div>
                <!-- 흰색 bord -->
                <div style="display: flex; flex-direction: column; justify-content: center; align-items: center; margin: 0 0.5rem 0 0.5rem; width: 80vw; height: 5rem; background-color: #ffffe8; border:0.1rem solid #b9a178; border-radius: 1rem;">
                    <!-- 프로필 이미지 -->
                    <div style="display: flex; flex-direction: row; align-items: center;">
                        <img style="width: 4rem; height: 4rem; margin: 0.5rem 0.5rem 0.5rem 1rem; border:0.1rem solid #bea77d; border-radius: 0.5rem;"
                             src="https://i.pinimg.com/564x/f5/fc/5e/f5fc5e2cfb73b98794e34f24dd599370.jpg">
                        <!-- 점선 -->
                        <div style="width: 2px; border-left: 4px dotted #c5ae86;height: 3rem;"></div>
                        <!-- 레벨 구간 -->
                        <div style="display: flex; flex-direction: column; margin: 0 1rem;">
                            <div style="margin: 0.2rem 0.3rem; display: flex; flex-direction: row; justify-content: space-between;">
                                <div style="font-size: 1.3rem; font-family: 'Titan One', sans-serif; color:white;  -webkit-text-stroke: 2px #ff9c54;">
                                    Lv. 15
                                </div>
                                <div style="font-size: 1.2rem;font-family: 'Titan One', sans-serif; color:white; -webkit-text-stroke: 1.5px #c59042;">
                                    kugring
                                </div>
                            </div>
                            <div>
                                <div class="progress" aria-valuemax="100"
                                     style="border: 0.2rem solid orange; border-radius: 35px; width: 50vw;">
                                    <div class="progress-bar progress-bar-striped bg-warning progress-bar-animated"
                                         style="width: 75%"></div>
                                </div>
                            </div>
                            <div style="margin: 0 0.2rem; display: flex; flex-direction: row; justify-content: space-between;font-family: 'Titan One', sans-serif; color:white; -webkit-text-stroke: 1.5px #ff9c54;">
                                <div>
                                    EXP
                                </div>
                                <div>
                                    60/100
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 차트 카드 -->
                <div class="chart_card"
                     style="position: sticky; display: flex; flex-direction: row; justify-content: space-between; overflow: scroll; margin: 0.5rem 0; scroll-snap-type: x mandatory; overflow-x: auto">
                    {% for plan_chart in plan_chart %}
                        <div style="margin: 0 2.5rem 0 2.5rem; width: 100vw; display: flex; flex-direction: column; justify-content: center; align-items: center; scroll-snap-align: center;">
                            <div class="card"
                                 style="display: flex; flex-direction: column; justify-content: space-between; align-items: center; padding-top: 0.5rem; width: 300px; border: 0.1rem solid #b7a27e;  border-radius: 1rem; background-color: #fffff9;">
                                <div style="margin-bottom: 0.5rem; font-weight: 600; font-family: 'Titan One', sans-serif; color: white; -webkit-text-stroke: 0.5px #ff9c54;">
                                    * {{ plan_chart }} *
                                </div>
                                <canvas id={{ plan_chart }} width="295" height="126"></canvas>
                            </div>
                        </div>
                    {% endfor %}
                </div>
                <!-- 썸네일 미리보기 -->
                <div style="display: flex; flex-direction: row; flex-wrap: wrap; justify-content: center; width: 80vw; height: 4rem;  padding: 0.4rem 0.2rem; margin: 0 0.5rem 0.5rem 0.5rem;background-color: #ffffe8; border:0.1rem solid #bba784; border-radius: 1rem; overflow: auto; scroll-snap-type: y mandatory;">
                    {% for i in test %}
                        <div class="card"
                             style="width: 3.5rem; height: 3.5rem; margin-bottom: 0.4rem; scroll-snap-align: center; background-color: #ffffe8;">
                            <img style="width: 3.5rem; height: 3.5rem; object-fit: contain; padding: 0.3rem"
                                    {% if not i %}
                                 src="https://i.pinimg.com/564x/73/69/2b/73692b0c8f849c85448c92469f3f4128.jpg"
                                    {% else %}
                                 src="{% get_media_prefix %}{{ i.image }}"
                                    {% endif %}
                            >
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    <div class="footer">

    </div>
</div>
</html>


<script>
    const rangeInput = document.getElementById('customRange3');
    const rangeValue = document.getElementById('rangeValue');

    // input 요소의 값이 변경될 때 값을 업데이트합니다.
    rangeInput.addEventListener('input', () => {
        rangeValue.textContent = `현재 값: ${rangeInput.value}`;
    });
</script>
<!-- 모달 색깔 클래스 넣기 -->
<script>
    var nav_title =
    {{ nav_title|safe }}
    var diet = {{  diet|safe }};
    var exercise = {{  exercise|safe }};
    var morning_record = {{  morning_record|safe }};
    var evening_record = {{  evening_record|safe }};
    var menu = [diet, exercise, morning_record, evening_record]

    function openFileUploader(title, tag) {

        // 이미지 업로더 클릭
        document.getElementById("imageInput").click();

        var tag_select = document.getElementById("tag_select");
        var number_unit = document.getElementById("number_unit");

        // 태그_셀렉터의 기본설정값
        tag_select.innerHTML = '';
        number_unit.innerHTML = '';

        for (var i = 0; i < nav_title.length; i++) {
            if (title === nav_title[i]) {
                for (var j = 0; j < menu[i].length; j++) {
                    var newOption = document.createElement('option');
                    newOption.value = menu[i][j];
                    newOption.text = menu[i][j];
                    tag_select.appendChild(newOption);
                }
            }
        }
        // 태그 옵션값 설정
        tag_select.value = tag;

        switch (tag) {
            case "아침":
            case "점심":
            case "저녁":
            case "기타1":
            case "기타2":
                number_unit.innerHTML = '_kcal';
                break;
            case "유산소":
                number_unit.innerHTML = '_분';
                break;
            case "웨이트":
                number_unit.innerHTML = '_set';
                break;
            case "만보기":
                number_unit.innerHTML = '_걸음';
                break;
            case "눈캠":
            case "크로키":
                number_unit.innerHTML = '_만족';
                break;
            case "체중":
                number_unit.innerHTML = '_kg';
                break;
            case "허리둘레":
                number_unit.innerHTML = '_cm';
                break;
            case "수면시간":
                number_unit.innerHTML = '_시간';
                break;
            case "수면만족도":
            case "근육통":
            case "구내염":
            case "식사균형":
            case "식사시간":
            case "스트레스":
            case "피로감":
            case "소화불량":
            case "불면증":
                number_unit.innerHTML = '_점수';
                break;
            default:
                // 처리하지 않는 다른 경우에 대한 기본 동작
                break;
        }

        var colorClass = title + "_color";
        var backcolorClass = title + "_backcolor";
        var h_backcolorClass = title + "_h_backcolor";
        var bordercolorClass = title + "_bordercolor";

        // 모달 요소 찾기
        var modal_window = document.getElementById("modal_window");
        var content_card = document.getElementById("content_card");
        var dateInput = document.getElementById("dateInput");
        var btn_close = document.getElementById("btn_close");
        var tag_select = document.getElementById("tag_select");
        var myNumberSwiper = document.getElementById("myNumberSwiper");
        var card_btn_border = document.getElementById("card_btn_border");
        var modal_upload_btn = document.getElementById("modal_upload_btn");


        // 클래스를 동적으로 설정
        modal_window.classList.add(colorClass);
        modal_window.classList.add(bordercolorClass);

        content_card.classList.add(colorClass);
        content_card.classList.add(backcolorClass);
        content_card.classList.add(bordercolorClass);

        dateInput.classList.add(colorClass);
        dateInput.classList.add(bordercolorClass);

        btn_close.classList.add(colorClass);
        btn_close.classList.add(bordercolorClass);

        tag_select.classList.add(colorClass);
        tag_select.classList.add(bordercolorClass);

        myNumberSwiper.classList.add(colorClass);

        card_btn_border.classList.add(colorClass);

        modal_upload_btn.classList.add(backcolorClass);
        modal_upload_btn.classList.add(h_backcolorClass);

        // DIET_ 컬러 정리
        var diet_color = document.querySelectorAll(".diet_color");
        for (var i = 0; i < diet_color.length; i++) {
            diet_color[i].style.color = h_pastel_clr[0];
        }
        var diet_backcolor = document.querySelectorAll(".diet_backcolor");
        for (var i = 0; i < diet_backcolor.length; i++) {
            diet_backcolor[i].style.backgroundColor = pastel_clr[0];
        }
        var diet_h_backcolor = document.querySelectorAll(".diet_h_backcolor");
        for (var i = 0; i < diet_h_backcolor.length; i++) {
            diet_h_backcolor[i].style.backgroundColor = h_pastel_clr[0];
        }
        var diet_bordercolor = document.querySelectorAll(".diet_bordercolor");
        for (var i = 0; i < diet_bordercolor.length; i++) {
            diet_bordercolor[i].style.borderColor = h_pastel_clr[0];
        }

        // EXERCISE_ 컬러 정리
        var exercise_color = document.querySelectorAll(".exercise_color");
        for (var i = 0; i < exercise_color.length; i++) {
            exercise_color[i].style.color = h_pastel_clr[1];
        }
        var exercise_backcolor = document.querySelectorAll(".exercise_backcolor");
        for (var i = 0; i < exercise_backcolor.length; i++) {
            exercise_backcolor[i].style.backgroundColor = pastel_clr[1];
        }
        var exercise_h_backcolor = document.querySelectorAll(".exercise_h_backcolor");
        for (var i = 0; i < exercise_h_backcolor.length; i++) {
            exercise_h_backcolor[i].style.backgroundColor = h_pastel_clr[1];
        }
        var exercise_bordercolor = document.querySelectorAll(".exercise_bordercolor");
        for (var i = 0; i < exercise_bordercolor.length; i++) {
            exercise_bordercolor[i].style.borderColor = h_pastel_clr[1];
        }

        // morning_record_ 컬러 정리
        var morning_record_color = document.querySelectorAll(".morning_record_color");
        for (var i = 0; i < morning_record_color.length; i++) {
            morning_record_color[i].style.color = h_pastel_clr[2];
        }
        var morning_record_backcolor = document.querySelectorAll(".morning_record_backcolor");
        for (var i = 0; i < morning_record_backcolor.length; i++) {
            morning_record_backcolor[i].style.backgroundColor = pastel_clr[2];
        }
        var morning_record_h_backcolor = document.querySelectorAll(".morning_record_h_backcolor");
        for (var i = 0; i < morning_record_h_backcolor.length; i++) {
            morning_record_h_backcolor[i].style.backgroundColor = h_pastel_clr[2];
        }
        var morning_record_bordercolor = document.querySelectorAll(".morning_record_bordercolor");
        for (var i = 0; i < morning_record_bordercolor.length; i++) {
            morning_record_bordercolor[i].style.borderColor = h_pastel_clr[2];
        }

        // evening_record_ 컬러 정리
        var evening_record_color = document.querySelectorAll(".evening_record_color");
        for (var i = 0; i < evening_record_color.length; i++) {
            evening_record_color[i].style.color = h_pastel_clr[3];
        }
        var evening_record_backcolor = document.querySelectorAll(".evening_record_backcolor");
        for (var i = 0; i < evening_record_backcolor.length; i++) {
            evening_record_backcolor[i].style.backgroundColor = pastel_clr[3];
        }
        var evening_record_h_backcolor = document.querySelectorAll(".evening_record_h_backcolor");
        for (var i = 0; i < evening_record_h_backcolor.length; i++) {
            evening_record_h_backcolor[i].style.backgroundColor = h_pastel_clr[3];
        }
        var evening_record_bordercolor = document.querySelectorAll(".evening_record_bordercolor");
        for (var i = 0; i < evening_record_bordercolor.length; i++) {
            evening_record_bordercolor[i].style.borderColor = h_pastel_clr[3];
        }
        // 클래스를 동적으로 설정
        modal_window.classList.remove(colorClass);
        modal_window.classList.remove(bordercolorClass);

        content_card.classList.remove(colorClass);
        content_card.classList.remove(backcolorClass);
        content_card.classList.remove(bordercolorClass);

        dateInput.classList.remove(colorClass);
        dateInput.classList.remove(bordercolorClass);

        btn_close.classList.remove(colorClass);
        btn_close.classList.remove(bordercolorClass);

        tag_select.classList.remove(colorClass);
        tag_select.classList.remove(bordercolorClass);

        myNumberSwiper.classList.remove(colorClass);

        card_btn_border.classList.remove(colorClass);

        modal_upload_btn.classList.remove(backcolorClass);
        modal_upload_btn.classList.remove(h_backcolorClass);
    }
</script>
<!-- 버튼 색깔 순서대로 넣기 -->
<script>
    var pastel_clr = {{  pastel_clr|safe }};  // 색상 정보를 JavaScript 변수로 가져옴
    var h_pastel_clr = {{  h_pastel_clr|safe }};  // 색상 정보를 JavaScript 변수로 가져옴

    var buttons = document.querySelectorAll('.animationButton button');
    for (var i = 0; i < buttons.length; i++) {
        buttons[i].style.backgroundColor = pastel_clr[i];
        buttons[i].style.border = '0.2rem solid ' + h_pastel_clr[i];
    }
    // JavaScript를 사용하여 스타일을 동적으로 설정
    var prefixProgress = document.querySelectorAll(".progress-bar_color");
    for (var i = 0; i < prefixProgress.length; i++) {
        prefixProgress[i].style.backgroundColor = h_pastel_clr[i];
    }
    var title_card_border = document.querySelectorAll(".title_card_border");
    for (var i = 0; i < title_card_border.length; i++) {
        title_card_border[i].style.borderColor = h_pastel_clr[i];
        title_card_border[i].style.backgroundColor = pastel_clr[i];
    }

</script>
<!-- 이미지 업로드 -->
<script>
    // 모달의 imgArea를 클릭시 업로창 열림
    function imageInputUploader() {
        document.getElementById("imageInput").click();
    }

    document.addEventListener("DOMContentLoaded", function () {
        const imageInput = document.getElementById("imageInput");
        const modal_upload_btn = document.getElementById("modal_upload_btn");
        const uploadArea = document.getElementById("uploadArea");

        imageInput.addEventListener("change", function (e) {
            const file = e.target.files[0];

            if (file) {
                // 이미지 미리보기를 위해 이미지 URL 생성
                const imageURL = URL.createObjectURL(file);

                // 업로드된 이미지를 클릭한 공간에 표시
                uploadArea.innerHTML = `<img style="width: inherit; height: inherit; border-radius: 5px;" src="${imageURL}" alt="업로드 이미지">`;
            }
        });

        modal_upload_btn.addEventListener("click", function () {

            let file = imageInput.files[0];
            let image = file.name;
            let number_data = $('.number-swiper-value').val();
            let upload_date = $('#dateInput').val();
            let tag = $('#tag_select').val();
            let user_id = "kugring";

            let fd = new FormData();

            fd.append('file', file);
            fd.append('image', image);
            fd.append('number_data', number_data);
            fd.append('upload_date', upload_date);
            fd.append('tag', tag);
            fd.append('user_id', user_id);

            if (file) {
                // 백엔드 API 호출
                $.ajax({
                    url: "/check_duplicate",
                    data: {upload_date: upload_date, tag: tag},
                    method: "GET",
                    success: function (data) {
                        if (data.is_duplicate) {
                            // 중복 데이터가 있는 경우 확인 대화 상자 표시
                            if (confirm("이미 존재하는 데이터입니다. 데이터를 갱신하시겠습니까?")) {
                                // "Yes"를 클릭한 경우 중복 데이터 갱신 실행
                                $.ajax({
                                    url: "/upload",
                                    data: fd,
                                    method: "POST",
                                    processData: false,
                                    contentType: false,
                                    success: function (data) {
                                        console.log("성공");
                                    },
                                    error: function (request, status, error) {
                                        console.log("에러");
                                    },
                                    complete: function () {
                                        console.log("완료");
                                        location.replace("/kugring/");
                                    }
                                });
                            } else {
                                // "No"를 클릭한 경우 업로드 중단 또는 다른 작업 수행
                                alert("업로드가 중단되었습니다.");
                            }
                        } else {
                            // 중복 데이터가 아닌 경우 업로드 진행
                            $.ajax({
                                url: "/upload",
                                data: fd,
                                method: "POST",
                                processData: false,
                                contentType: false,
                                success: function (data) {
                                    console.log("성공");
                                },
                                error: function (request, status, error) {
                                    console.log("에러");
                                },
                                complete: function () {
                                    console.log("완료");
                                    location.replace("/kugring/");
                                }
                            });
                        }
                    },
                    error: function (request, status, error) {
                        console.log("중복 확인 중 에러");
                    }
                });
            } else {
                alert("이미지를 선택하세요.");
            }

        });
    });

</script>
<!-- 첫번째 모달이 등장 -->
<script>
    function openModal(modalId) {
        $(modalId).css({display: 'flex'});
        $(document.body).css({overflow: 'hidden'});
    }

    $('.diet_img_box').click(function () {
        openModal('#title_modal');
    });

    $('.exercise_img_box').click(function () {
        openModal('#title_modal');
    });

    $('.morning_record_img_box').click(function () {
        openModal('#title_modal');
    });

    $('.evening_record_img_box').click(function () {
        openModal('#title_modal');
    });
</script>
<!-- 모달창 닫기 -->
<script>
    function closeModal(modalId) {
        $(modalId).css({display: 'none'});
        $(document.body).css({overflow: 'visible'});
    }

    $('.btn-close').click(function () {
        closeModal('#title_modal');
    });
</script>
<!-- 오늘날짜 가져오기 -->
<script>
    // 오늘의 날짜를 가져오는 함수
    function getCurrentDate() {
        const today = new Date();
        const year = today.getFullYear();
        const month = String(today.getMonth() + 1).padStart(2, '0');
        const day = String(today.getDate()).padStart(2, '0');
        return `${year}-${month}-${day}`;
    }

    // 오늘의 날짜를 가져와서 입력 필드의 초기값으로 설정
    const dateInput = document.getElementById('dateInput');
    dateInput.value = getCurrentDate();
</script>
<!-- 드롭다운 애니매이션 -->
<script>
    // 모든 버튼 요소 가져오기
    var buttons = document.querySelectorAll('.animationButton');
    // 부모 요소의 높이 가져오기

    // 클래스가 적용된 모든 요소를 선택합니다.
    var cardBoxes = document.querySelectorAll('.first_card_box');

    // 토글의 초기 상태를 나타내는 변수
    var isCardBoxToggled = false; // 초기 상태를 나타내는 변수

    // 클릭 이벤트 리스너 함수 정의
    function buttonClickHandler(button) {
        buttons.forEach(function (otherButton) {
            if (otherButton !== button) {
                if (otherButton.style.opacity === '0') {
                    setTimeout(function () {
                        otherButton.style.opacity = '1';
                    }, 300);
                    otherButton.style.height = '14.5rem';
                    otherButton.style.width = '20vw';
                    button.style.width = '20vw';
                    setTimeout(function () {
                        otherButton.style.transform = 'translateY(-10px)';
                    }, 200);
                    setTimeout(function () {
                        otherButton.style.transform = 'translateY(0px)';
                    }, 400);

                } else {
                    otherButton.style.transform = 'translateY(-400px)';
                    setTimeout(function () {
                        otherButton.style.transform = 'translateY(0px)';
                    }, 200);
                    otherButton.style.opacity = '0';
                    otherButton.style.width = '0';
                    button.style.height = '14.5rem';
                    button.style.width = '100vw';
                }
            }
        });
    }

    // 각 버튼에 클릭 이벤트 리스너 추가
    buttons.forEach(function (button) {
        button.addEventListener('click', function () {
            buttonClickHandler(button);
            if (isCardBoxToggled) {
                // 두 번째로 클릭할 때, 높이를 12rem로 다시 설정
                cardBoxes.forEach(function (cardBox) {
                    // 상단 메뉴가 보이기 위한 높이임
                    cardBox.style.height = '3.2rem';
                });
            } else {
                // 첫 번째로 클릭할 때, 높이를 1rem로 설정
                cardBoxes.forEach(function (cardBox) {
                    cardBox.style.height = '14.5rem';
                });
            }
            isCardBoxToggled = !isCardBoxToggled;
        });
    });


</script>
<!-- diet 차트 -->
<script>
    // 중요한 데이터 값들!
    const diet_chart_data = [10, 10, 10, 10, 10, 10, 10, 50, 27, 52, 38, 26, 75, 22];
    const diet_chart_dataHalf = [5, 10, 20, 7, 30, 20, 26, 14, 36, 25, 72, 25, 53, 50];

    // 최대값 최소값 구하기
    const diet_mostPositiveValue = Math.max(...diet_chart_data);
    const diet_mostNegativeValue = Math.min(...diet_chart_data);


    var diet_mixedChart = {
        type: 'bar',
        labels: ['Mon', 'Tue', 'Wue', 'Tru', 'Fri', 'Sat', 'Sun', 'Mon', 'Tue', 'Wue', 'Tru', 'Fri', 'Sat', 'Sun',],
        datasets: [
            {
                label: '허리둘레',
                data: diet_chart_dataHalf,
                backgroundColor: 'transparent',
                borderColor: 'rgba(239,142,64,0.58)',
                type: 'line',
                pointBorderWidth: 2,
                pointRadius: 8,
                pointBackgroundColor: 'rgb(255,242,229)',
                datalabels: {
                    font: {
                        size: 10,
                        weight: 600
                    },
                    color: 'rgba(222,95,50,0.58)',
                    align: 'center',
                    anchor: 'center'
                }
            },
            {
                label: '체중',
                data: diet_chart_data,
                backgroundColor: [
                    'rgb(255,224,176)',

                ],
                borderColor: [
                    'rgb(255,202,136)',

                ],
                borderWidth: 2,
                borderRadius: 10,
                borderSkipped: true,
                categoryPercentage: 0.6
            },
        ]
    };
    // 플러그인 정의
    const diet_ChartMovePlugin = {
        id: 'moveChart',
        afterEvent(chart, args) {
            const {ctx, canvas, chartArea: {left, right, top, bottom, width, height}} = chart;

            // 마우스가 있는 좌표를 알려주는 코드
            canvas.addEventListener('mousemove', (event) => {
                const x = args.event.x;
                const y = args.event.y;

                // x,y축의 픽셀값을 설정하고 그에 따라 마우스 모양을 다르게 한다.
                {#if (x >= left - 80 && x <= left + 80) {#} // Y축 범위를 줄일수있음
                if (x >= left - 80 && x <= left + 80) {
                    canvas.style.cursor = 'pointer';
                } else if (x >= right - 80 && x <= right + 80) {
                    canvas.style.cursor = 'pointer';
                } else {
                    canvas.style.cursor = 'default';
                }
            })
        },


        afterDraw(chart, args, options) {
            const {ctx, chartArea} = chart;
            const {left, right, top, bottom, width, height} = chartArea;

            class CircleChevron {
                //construcor(x1,y1) {
                //  //
                //}
                draw(ctx, x1, pixel) {
                    const angle = Math.PI / 180;

                    <!-- 일부러 방향표 빼놓은것 -->

                    // 동그라미 그리기
                    {#ctx.beginPath();#}
                    {#ctx.lineWidth = 3;#}
                    {#ctx.strokeStyle = 'rgba(102,102,102,0.5)';#}
                    {#ctx.fillStyle = 'white';#}
                    {#ctx.arc(x1, height / 2 + top + 9, 10, angle * 0, angle * 360, false);#}
                    {#ctx.stroke();#}
                    {#ctx.fill();#}
                    {#ctx.closePath();#}
                    {##}
                    {#// 화살표 그리기#}
                    {#ctx.beginPath();#}
                    {#ctx.lineWidth = 3;#}
                    {#ctx.strokeStyle = 'rgb(255,156,84)';#}
                    {#ctx.moveTo(x1 + pixel, top + height / 2 + top - 6.5);#}
                    {#ctx.lineTo(x1 - pixel, top + height / 2 + top - 1);#}
                    {#ctx.lineTo(x1 + pixel, top + height / 2 + top + 4.5);#}
                    {#ctx.stroke();#}
                    {#ctx.closePath();#}

                    <!-- 여기까지 빼놓은것 -->
                }
            }

            // 왼쪽 버튼을 그리는 코드
            let drawCircleLeft = new CircleChevron();
            drawCircleLeft.draw(ctx, left, 4);

            // 오른쪽 버튼을 그리는 코드
            let drawCircleRight = new CircleChevron();
            drawCircleRight.draw(ctx, right, -4);

            // back_스크롤 만드는 코드
            ctx.beginPath();
            ctx.fillStyle = 'rgb(255,236,177)';
            ctx.rect(left + 15, bottom + 19, width - 30, 7);
            ctx.fill();
            ctx.closePath()
            // front_스크롤 만드는 코드
            ctx.beginPath();
            ctx.fillStyle = 'rgb(252,195,140)';
            ctx.rect(left - 0.8, 0, width + 1, 2); // 메인 위쪽 테두리
            ctx.rect(left - 1, 93, width + 2, 3); // 메인 아래 테두리
            ctx.rect(left - 1, -7, 2, 126); // 메인 왼쪽 테두리
            ctx.rect(right - 1, -7, 2, 126); // 메인 오른쪽 테두리
            ctx.fill();
            ctx.closePath()

            // 양쪽 사이드에 테두리 그리기
            ctx.beginPath();
            ctx.fillStyle = 'rgb(252,195,140)';
            ctx.rect(left, bottom + 19, 15, 7); // 스크롤 왼쪽 두꺼운 테두리
            ctx.rect(right - 15, bottom + 19, 15, 7); // 스크롤 오른쪽 오른쪽 테두리
            ctx.rect(left + 15, bottom + 19, width - 30, 2); // 스크롤 위쪽 테두리
            ctx.rect(left + 15, bottom + 24, width - 30, 2); // 스크롤 아래쪽 테두리
            ctx.fill();
            ctx.closePath()

            // 칸막이 그리기
            ctx.beginPath();
            ctx.fillStyle = 'rgb(252,195,140)';
            ctx.rect(left + 39, bottom, 2, 21); // 1
            ctx.rect(left + 78, bottom, 2, 21); // 2
            ctx.rect(left + 117, bottom, 2, 21); // 3
            ctx.rect(left + 156, bottom, 2, 21); // 4
            ctx.rect(left + 195, bottom, 2, 21); // 5
            ctx.rect(left + 234, bottom, 2, 21); // 6
            ctx.fill();
            ctx.closePath()

            // movable bar
            const min = chart.options.scales.x.min;
            let startingPoint = left + 15 + width / diet_chart_data.length * min;
            const barWidth = (width - 30) / (diet_chart_data.length / 7)

            const totalWidth = startingPoint + barWidth
            if (totalWidth > width) {
                startingPoint = right - 15 - barWidth;
            }

            ctx.beginPath();
            ctx.fillStyle = 'rgb(255,255,255)';
            ctx.rect(startingPoint, bottom + 21, barWidth, 3);
            ctx.fill();
            ctx.closePath()

        }
    }


    // Chart.js 플러그인 생성
    Chart.register(diet_ChartMovePlugin);
    Chart.register(ChartDataLabels);


    var diet_ctx = document.getElementById('diet_chart').getContext('2d');
    var diet_chart = new Chart(diet_ctx, {
            type: 'bar',
            data: diet_mixedChart,
            plugins: {
                moveChart: [diet_ChartMovePlugin, ChartDataLabels] // 플러그인 활성화
            },
            options: {
                layout: {
                    padding: {
                        top: -4,
                        right: 0,
                        bottom: 20,
                    }

                },
                plugins: {
                    datalabels: {
                        padding: {top: -5},
                        align: 'start',
                        anchor: 'start',
                        color: 'orange',
                        font: {
                            weight: 600
                        },
                    },
                    tooltip: {
                        enabled: false
                    },
                    legend: {
                        display: false
                    },
                    title: {
                        display: false,
                        text: "식단과 운동",
                        fontSize: 10
                    }
                },
                scales: {
                    x: {
                        position: 'top',
                        min: 0, // 0~6은 1~7를 의미한다.
                        max: 6,

                        ticks: {
                            padding: 10,
                            font:
                                {
                                    size: 10,
                                    weight: 600
                                }
                            ,
                            color: 'orange', // 폰트 색상 변경

                        },
                        grid: {
                            display: true,
                            drawBorder: false,
                            drawOnChartArea: false, // 차트 안에서의 x축 그리드를 그려줌
                            color: 'rgb(255,156,84)',
                            drawTicks: false, // x축에 삐죽 튀어난 선을 없애줌
                        },
                        stacked: true, // 데이터 누적 시킬것인지!
                        border: {
                            display: false,
                            color: 'rgb(255,156,84)', //  위쪽 차트 테두리 색상
                            width: 2, //  위쪽 차트 테두리 굵기
                        }
                    },
                    x2: {
                        ticks: {
                            font: {
                                size: 0
                            }
                        },
                        grid: {
                            display: false,
                            drawBorder: false,
                            drawTicks: true,
                        },
                        position: 'bottom',
                        min: 0, // 0~6은 1~7를 의미한다.
                        max: 6,
                        stacked: false, // 데이터 누적 시킬것인지!
                        border: {
                            display: false,
                            color: 'rgb(252,195,140)', //  아래쪽 차트 테두리 색상
                            width: 2, //  아래쪽 차트 테두리 굵기
                        }
                    },
                    y: {
                        ticks: {
                            display: false
                        },
                        grid: {
                            display: false,
                            drawBorder: false
                        },
                        stacked: true, // 데이터 누적 시킬것인지!
                        border: {
                            color: 'rgb(255,156,84)', //  왼쪽 차트 테두리 색상
                            width: 2, //  왼쪽 차트 테두리 굵기
                        }
                    },
                    y2: {
                        position:
                            'right',
                        ticks: {
                            display: false
                        },
                        grid: {
                            display: false,
                            drawBorder: false
                        },
                        stacked: true, // 데이터 누적 시킬것인지!
                        border: {
                            color: 'rgb(255,156,84)', //  오른쪽 차트 테두리 색상
                            width: 2, //  오른쪽 차트 테두리 굵기
                        }
                    }
                }
            },
        })
    ;

    function moveScroll() {
        const {ctx, canvas, chartArea: {left, right, top, bottom, width, height}} = diet_chart;

        canvas.addEventListener('click', (event) => {
            const rect = canvas.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;
            console.log(diet_chart_data.length)
            {#if (x >= left - 80 && x <= left + 80) {#}  //필요시 Y축 값을 넣는다.
            if (x >= left - 80 && x <= left + 80) {
                diet_chart.options.scales.x.min = diet_chart.scales.x.min - 7;
                diet_chart.options.scales.x.max = diet_chart.scales.x.max - 7;
                if (diet_chart.options.scales.x.max <= 0) {
                    diet_chart.options.scales.x.min = 0;
                    diet_chart.options.scales.x.max = 6;
                }
            }

            if (x >= right - 80 && x <= right + 80) {
                diet_chart.options.scales.x.min = diet_chart.scales.x.min + 7;
                diet_chart.options.scales.x.max = diet_chart.scales.x.max + 7;
                if (diet_chart.options.scales.x.max >= diet_chart_data.length) {
                    diet_chart.options.scales.x.min = diet_chart_data.length - 7;
                    diet_chart.options.scales.x.max = diet_chart_data.length;
                }
            }
            diet_chart.update();
        })
    }

    function scrollWheel(wheel, chart) {
        if (wheel.deltaY < 0) {
            console.log(wheel.deltaY);
            diet_chart.options.scales.x.min = diet_chart.scales.x.min - 7;
            diet_chart.options.scales.x.max = diet_chart.scales.x.max - 7;
            if (diet_chart.options.scales.x.max <= 0) {
                diet_chart.options.scales.x.min = 0;
                diet_chart.options.scales.x.max = 6;
            }
        }
        if (wheel.deltaY > 0) {
            console.log(wheel.deltaY);
            diet_chart.options.scales.x.min = diet_chart.scales.x.min + 7;
            diet_chart.options.scales.x.max = diet_chart.scales.x.max + 7;
            if (diet_chart.options.scales.x.max >= diet_chart_data.length) {
                diet_chart.options.scales.x.min = diet_chart_data.length - 7;
                diet_chart.options.scales.x.max = diet_chart_data.length;
            }
        }
        diet_chart.update();
    }


    diet_chart.canvas.onclick = moveScroll;

    diet_chart.canvas.addEventListener('wheel', (e) => {
        scrollWheel(e, diet_chart)
    });

    var dragStartX = 0;
    var isDragging = false;

    // 마우스 다운 이벤트 및 터치 시작 이벤트 처리
    diet_chart.canvas.addEventListener('mousedown', handleDragStart);
    diet_chart.canvas.addEventListener('touchstart', handleDragStart);

    function handleDragStart(event) {
        if (event.type === 'mousedown') {
            dragStartX = event.clientX;
        } else if (event.type === 'touchstart') {
            dragStartX = event.touches[0].clientX;
        }

        isDragging = true;
    }

    {#// 마우스 이동 이벤트 및 터치 이동 이벤트 처리#}
    {#diet_chart.canvas.addEventListener('mousemove', handleDrag);#}
    {#diet_chart.canvas.addEventListener('touchmove', handleDrag);#}
    {##}
    {#function handleDrag(event) {#}
    {#    if (isDragging) {#}
    {#        var clientX;#}
    {##}
    {#        if (event.type === 'mousemove') {#}
    {#            clientX = event.clientX;#}
    {#        } else if (event.type === 'touchmove') {#}
    {#            clientX = event.touches[0].clientX;#}
    {#        }#}
    {##}
    {#        var deltaX = clientX - dragStartX;#}
    {#        dragStartX = clientX;#}
    {##}
    {#        // 원하는 이동 거리 및 방향에 따라 x 축 스케일 업데이트#}
    {#        var scrollStep = 7;#}
    {#        diet_chart.options.scales.x.min -= deltaX / scrollStep;#}
    {#        diet_chart.options.scales.x.max -= deltaX / scrollStep;#}
    {##}
    {#        // 최소값과 최대값을 0과 diet_chart_data.length / 7 범위로 고정#}
    {#        if (diet_chart.options.scales.x.min < 0) {#}
    {#            if (diet_chart.options.scales.x.max <= 7) {#}
    {#                diet_chart.options.scales.x.min = 0;#}
    {#                diet_chart.options.scales.x.max = 6;#}
    {#            }#}
    {#        }#}
    {#        if (diet_chart.options.scales.x.max > diet_chart_data.length) {#}
    {#            if (diet_chart.options.scales.x.max >= diet_chart_data.length) {#}
    {#                diet_chart.options.scales.x.min = diet_chart_data.length - 7;#}
    {#                diet_chart.options.scales.x.max = diet_chart_data.length;#}
    {#            }#}
    {#        }#}
    {#        diet_chart.update();#}
    {#    }    }#}
    {##}
    {#// 마우스 업 이벤트 및 터치 업 이벤트 처리#}
    {#document.addEventListener('mouseup', handleDragEnd);#}
    {#diet_chart.canvas.addEventListener('touchend', handleDragEnd);#}
    {##}
    {#function handleDragEnd() {#}
    {#    isDragging = false;    }#}

    // var diet_chart = new Chart(ctx, {
    //   type: 'bar',
    //   data: diet_mixedChart,
    //   options: {
    //     legend: {
    //       display: true
    //     }
    //   }
    // });
</script>
<!-- kcal 차트 -->
<script>
    // 중요한 데이터 값들!
    const kcal_chart_data = [15, 15, 15, 15, 15, 15, 15, 55, 32, 57, 42, 30, 80, 27];
    const kcal_chart_dataHalf = [5, 10, 20, 7, 30, 20, 26, 14, 36, 25, 72, 25, 53, 50];

    // 최대값 최소값 구하기
    const mostPositiveValue = Math.max(...kcal_chart_data);
    const mostNegativeValue = Math.min(...kcal_chart_data);


    var mixedChart = {
        type: 'bar',
        labels: ['Mon', 'Tue', 'Wue', 'Tru', 'Fri', 'Sat', 'Sun', 'Mon', 'Tue', 'Wue', 'Tru', 'Fri', 'Sat', 'Sun',],
        datasets: [
            {
                label: 'Line Dataset',
                data: kcal_chart_dataHalf,
                backgroundColor: 'transparent',
                borderColor: 'rgba(239,142,64,0.58)',
                type: 'line',
                pointBorderWidth: 2,
                pointRadius: 8,
                pointBackgroundColor: 'rgb(255,242,229)',
                datalabels: {
                    font: {
                        size: 10,
                        weight: 600
                    },
                    color: 'rgba(222,95,50,0.58)',
                    align: 'center',
                    anchor: 'center'
                }
            },
            {
                label: '몸무게',
                data: kcal_chart_data,
                backgroundColor: [
                    'rgb(255,224,176)',

                ],
                borderColor: [
                    'rgb(255,202,136)',

                ],
                borderWidth: 2,
                borderRadius: 10,
                borderSkipped: true,
                categoryPercentage: 0.6
            },
        ]
    };
    // 플러그인 정의
    const ChartMovePlugin = {
        id: 'moveChart',
        afterEvent(chart, args) {
            const {ctx, canvas, chartArea: {left, right, top, bottom, width, height}} = chart;

            // 마우스가 있는 좌표를 알려주는 코드
            canvas.addEventListener('mousemove', (event) => {
                const x = args.event.x;
                const y = args.event.y;

                // x,y축의 픽셀값을 설정하고 그에 따라 마우스 모양을 다르게 한다.
                if (x >= left - 80 && x <= left + 80) {
                    canvas.style.cursor = 'pointer';
                } else if (x >= right - 80 && x <= right + 80) {
                    canvas.style.cursor = 'pointer';
                } else {
                    canvas.style.cursor = 'default';
                }
            })
        },


        afterDraw(chart, args, options) {
            const {ctx, chartArea} = chart;
            const {left, right, top, bottom, width, height} = chartArea;

            class CircleChevron {
                //construcor(x1,y1) {
                //  //
                //}
                draw(ctx, x1, pixel) {
                    const angle = Math.PI / 180;

                    <!-- 일부러 방향표 빼놓은것 -->

                    // 동그라미 그리기
                    {#ctx.beginPath();#}
                    {#ctx.lineWidth = 3;#}
                    {#ctx.strokeStyle = 'rgba(102,102,102,0.5)';#}
                    {#ctx.fillStyle = 'white';#}
                    {#ctx.arc(x1, height / 2 + top + 9, 10, angle * 0, angle * 360, false);#}
                    {#ctx.stroke();#}
                    {#ctx.fill();#}
                    {#ctx.closePath();#}
                    {##}
                    {#// 화살표 그리기#}
                    {#ctx.beginPath();#}
                    {#ctx.lineWidth = 3;#}
                    {#ctx.strokeStyle = 'rgb(255,156,84)';#}
                    {#ctx.moveTo(x1 + pixel, top + height / 2 + top - 6.5);#}
                    {#ctx.lineTo(x1 - pixel, top + height / 2 + top - 1);#}
                    {#ctx.lineTo(x1 + pixel, top + height / 2 + top + 4.5);#}
                    {#ctx.stroke();#}
                    {#ctx.closePath();#}

                    <!-- 여기까지 빼놓은것 -->
                }
            }

            // 왼쪽 버튼을 그리는 코드
            let drawCircleLeft = new CircleChevron();
            drawCircleLeft.draw(ctx, left, 4);

            // 오른쪽 버튼을 그리는 코드
            let drawCircleRight = new CircleChevron();
            drawCircleRight.draw(ctx, right, -4);

            // back_스크롤 만드는 코드
            ctx.beginPath();
            ctx.fillStyle = 'rgb(255,236,177)';
            ctx.rect(left + 15, bottom + 19, width - 30, 7);
            ctx.fill();
            ctx.closePath()
            // front_스크롤 만드는 코드
            ctx.beginPath();
            ctx.fillStyle = 'rgb(252,195,140)';
            ctx.rect(left - 0.8, 0, width + 1, 2); // 메인 위쪽 테두리
            ctx.rect(left - 1, 93, width + 2, 3); // 메인 아래 테두리
            ctx.rect(left - 1, -7, 2, 126); // 메인 왼쪽 테두리
            ctx.rect(right - 1, -7, 2, 126); // 메인 오른쪽 테두리
            ctx.fill();
            ctx.closePath()

            // 양쪽 사이드에 테두리 그리기
            ctx.beginPath();
            ctx.fillStyle = 'rgb(252,195,140)';
            ctx.rect(left, bottom + 19, 15, 7); // 스크롤 왼쪽 두꺼운 테두리
            ctx.rect(right - 15, bottom + 19, 15, 7); // 스크롤 오른쪽 오른쪽 테두리
            ctx.rect(left + 15, bottom + 19, width - 30, 2); // 스크롤 위쪽 테두리
            ctx.rect(left + 15, bottom + 24, width - 30, 2); // 스크롤 아래쪽 테두리
            ctx.fill();
            ctx.closePath()

            // 칸막이 그리기
            ctx.beginPath();
            ctx.fillStyle = 'rgb(252,195,140)';
            ctx.rect(left + 39, bottom, 2, 21); // 1
            ctx.rect(left + 78, bottom, 2, 21); // 2
            ctx.rect(left + 117, bottom, 2, 21); // 3
            ctx.rect(left + 156, bottom, 2, 21); // 4
            ctx.rect(left + 195, bottom, 2, 21); // 5
            ctx.rect(left + 234, bottom, 2, 21); // 6
            ctx.fill();
            ctx.closePath()

            // movable bar
            const min = chart.options.scales.x.min;
            let startingPoint = left + 15 + width / kcal_chart_data.length * min;
            const barWidth = (width - 30) / (kcal_chart_data.length / 7)

            const totalWidth = startingPoint + barWidth
            if (totalWidth > width) {
                startingPoint = right - 15 - barWidth;
            }

            ctx.beginPath();
            ctx.fillStyle = 'rgb(255,255,255)';
            ctx.rect(startingPoint, bottom + 21, barWidth, 3);
            ctx.fill();
            ctx.closePath()

        }
    }


    // Chart.js 플러그인 생성
    Chart.register(ChartMovePlugin);
    Chart.register(ChartDataLabels);


    var ctx = document.getElementById('kcal_chart').getContext('2d');
    var kcal_chart = new Chart(ctx, {
            type: 'bar',
            data: mixedChart,
            plugins: {
                moveChart: [ChartMovePlugin, ChartDataLabels] // 플러그인 활성화
            },
            options: {
                layout: {
                    padding: {
                        top: -4,
                        right: 0,
                        bottom: 20,
                    }

                },
                plugins: {
                    datalabels: {
                        padding: {top: -5},
                        align: 'start',
                        anchor: 'start',
                        color: 'orange',
                        font: {
                            weight: 600
                        },
                    },
                    tooltip: {
                        enabled: false
                    },
                    legend: {
                        display: false
                    },
                    title: {
                        display: false,
                        text: "식단과 운동",
                        fontSize: 10
                    }
                },
                scales: {
                    x: {
                        position: 'top',
                        min: 0, // 0~6은 1~7를 의미한다.
                        max: 6,

                        ticks: {
                            padding: 10,
                            font:
                                {
                                    size: 10,
                                    weight: 600
                                }
                            ,
                            color: 'orange', // 폰트 색상 변경

                        },
                        grid: {
                            display: true,
                            drawBorder: false,
                            drawOnChartArea: false, // 차트 안에서의 x축 그리드를 그려줌
                            color: 'rgb(255,156,84)',
                            drawTicks: false, // x축에 삐죽 튀어난 선을 없애줌
                        },
                        stacked: true, // 데이터 누적 시킬것인지!
                        border: {
                            display: false,
                            color: 'rgb(255,156,84)', //  위쪽 차트 테두리 색상
                            width: 2, //  위쪽 차트 테두리 굵기
                        }
                    },
                    x2: {
                        ticks: {
                            font: {
                                size: 0
                            }
                        },
                        grid: {
                            display: false,
                            drawBorder: false,
                            drawTicks: true,
                        },
                        position: 'bottom',
                        min: 0, // 0~6은 1~7를 의미한다.
                        max: 6,
                        stacked: false, // 데이터 누적 시킬것인지!
                        border: {
                            display: false,
                            color: 'rgb(252,195,140)', //  아래쪽 차트 테두리 색상
                            width: 2, //  아래쪽 차트 테두리 굵기
                        }
                    },
                    y: {
                        ticks: {
                            display: false
                        },
                        grid: {
                            display: false,
                            drawBorder: false
                        },
                        stacked: true, // 데이터 누적 시킬것인지!
                        border: {
                            color: 'rgb(255,156,84)', //  왼쪽 차트 테두리 색상
                            width: 2, //  왼쪽 차트 테두리 굵기
                        }
                    },
                    y2: {
                        position:
                            'right',
                        ticks: {
                            display: false
                        },
                        grid: {
                            display: false,
                            drawBorder: false
                        },
                        stacked: true, // 데이터 누적 시킬것인지!
                        border: {
                            color: 'rgb(255,156,84)', //  오른쪽 차트 테두리 색상
                            width: 2, //  오른쪽 차트 테두리 굵기
                        }
                    }
                }
            },
        })
    ;

    function moveScroll() {
        const {ctx, canvas, chartArea: {left, right, top, bottom, width, height}} = kcal_chart;

        canvas.addEventListener('click', (event) => {
            const rect = canvas.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;
            console.log(kcal_chart_data.length)
            if (x >= left - 80 && x <= left + 80) {
                kcal_chart.options.scales.x.min = kcal_chart.scales.x.min - 7;
                kcal_chart.options.scales.x.max = kcal_chart.scales.x.max - 7;
                if (kcal_chart.options.scales.x.max <= 0) {
                    kcal_chart.options.scales.x.min = 0;
                    kcal_chart.options.scales.x.max = 6;
                }
            }

            if (x >= right - 80 && x <= right + 80) {
                kcal_chart.options.scales.x.min = kcal_chart.scales.x.min + 7;
                kcal_chart.options.scales.x.max = kcal_chart.scales.x.max + 7;
                if (kcal_chart.options.scales.x.max >= kcal_chart_data.length) {
                    kcal_chart.options.scales.x.min = kcal_chart_data.length - 7;
                    kcal_chart.options.scales.x.max = kcal_chart_data.length;
                }
            }
            kcal_chart.update();
        })
    }

    function scrollWheel(wheel, chart) {
        if (wheel.deltaY < 0) {
            console.log(wheel.deltaY);
            kcal_chart.options.scales.x.min = kcal_chart.scales.x.min - 7;
            kcal_chart.options.scales.x.max = kcal_chart.scales.x.max - 7;
            if (kcal_chart.options.scales.x.max <= 0) {
                kcal_chart.options.scales.x.min = 0;
                kcal_chart.options.scales.x.max = 6;
            }
        }
        if (wheel.deltaY > 0) {
            console.log(wheel.deltaY);
            kcal_chart.options.scales.x.min = kcal_chart.scales.x.min + 7;
            kcal_chart.options.scales.x.max = kcal_chart.scales.x.max + 7;
            if (kcal_chart.options.scales.x.max >= kcal_chart_data.length) {
                kcal_chart.options.scales.x.min = kcal_chart_data.length - 7;
                kcal_chart.options.scales.x.max = kcal_chart_data.length;
            }
        }
        kcal_chart.update();
    }


    kcal_chart.canvas.onclick = moveScroll;

    kcal_chart.canvas.addEventListener('wheel', (e) => {
        scrollWheel(e, kcal_chart)
    });

    var dragStartX = 0;
    var isDragging = false;

    // 마우스 다운 이벤트 및 터치 시작 이벤트 처리
    kcal_chart.canvas.addEventListener('mousedown', handleDragStart);
    kcal_chart.canvas.addEventListener('touchstart', handleDragStart);

    function handleDragStart(event) {
        if (event.type === 'mousedown') {
            dragStartX = event.clientX;
        } else if (event.type === 'touchstart') {
            dragStartX = event.touches[0].clientX;
        }

        isDragging = true;
    }

    // 마우스 이동 이벤트 및 터치 이동 이벤트 처리
    {#kcal_chart.canvas.addEventListener('mousemove', handleDrag);#}
    {#kcal_chart.canvas.addEventListener('touchmove', handleDrag);#}
    {##}
    {#function handleDrag(event) {#}
    {#    if (isDragging) {#}
    {#        var clientX;#}
    {##}
    {#        if (event.type === 'mousemove') {#}
    {#            clientX = event.clientX;#}
    {#        } else if (event.type === 'touchmove') {#}
    {#            clientX = event.touches[0].clientX;#}
    {#        }#}
    {##}
    {#        var deltaX = clientX - dragStartX;#}
    {#        dragStartX = clientX;#}
    {##}
    {#        // 원하는 이동 거리 및 방향에 따라 x 축 스케일 업데이트#}
    {#        var scrollStep = 7;#}
    {#        kcal_chart.options.scales.x.min -= deltaX / scrollStep;#}
    {#        kcal_chart.options.scales.x.max -= deltaX / scrollStep;#}
    {##}
    {#        // 최소값과 최대값을 0과 kcal_chart_data.length / 7 범위로 고정#}
    {#        if (kcal_chart.options.scales.x.min < 0) {#}
    {#            if (kcal_chart.options.scales.x.max <= 7) {#}
    {#                kcal_chart.options.scales.x.min = 0;#}
    {#                kcal_chart.options.scales.x.max = 6;#}
    {#            }#}
    {#        }#}
    {#        if (kcal_chart.options.scales.x.max > kcal_chart_data.length) {#}
    {#            if (kcal_chart.options.scales.x.max >= kcal_chart_data.length) {#}
    {#                kcal_chart.options.scales.x.min = kcal_chart_data.length - 7;#}
    {#                kcal_chart.options.scales.x.max = kcal_chart_data.length;#}
    {#            }}#}
    {#        kcal_chart.update();}}#}
    {##}
    {#// 마우스 업 이벤트 및 터치 업 이벤트 처리#}
    {#document.addEventListener('mouseup', handleDragEnd);#}
    {#kcal_chart.canvas.addEventListener('touchend', handleDragEnd);#}
    {##}
    {#function handleDragEnd() {#}
    {#    isDragging = false;}#}

    // var kcal_chart = new Chart(ctx, {
    //   type: 'bar',
    //   data: mixedChart,
    //   options: {
    //     legend: {
    //       display: true
    //     }
    //   }
    // });
</script>
<!--condition 차트 -->
<script>
    // 중요한 데이터 값들!
    const condition_chart_data = [20, 20, 20, 20, 20, 20, 20, 50, 27, 52, 38, 26, 75, 22];
    const condition_chart_dataHalf = [5, 10, 20, 7, 30, 20, 26, 14, 36, 25, 72, 25, 53, 50];

    // 최대값 최소값 구하기
    const condition_mostPositiveValue = Math.max(...condition_chart_data);
    const condition_mostNegativeValue = Math.min(...condition_chart_data);


    var condition_mixedChart = {
        type: 'bar',
        labels: ['Mon', 'Tue', 'Wue', 'Tru', 'Fri', 'Sat', 'Sun', 'Mon', 'Tue', 'Wue', 'Tru', 'Fri', 'Sat', 'Sun',],
        datasets: [
            {
                label: '허리둘레',
                data: condition_chart_dataHalf,
                backgroundColor: 'transparent',
                borderColor: 'rgba(239,142,64,0.58)',
                type: 'line',
                pointBorderWidth: 2,
                pointRadius: 8,
                pointBackgroundColor: 'rgb(255,242,229)',
                datalabels: {
                    font: {
                        size: 10,
                        weight: 600
                    },
                    color: 'rgba(222,95,50,0.58)',
                    align: 'center',
                    anchor: 'center'
                }
            },
            {
                label: '체중',
                data: condition_chart_data,
                backgroundColor: [
                    'rgb(255,224,176)',

                ],
                borderColor: [
                    'rgb(255,202,136)',

                ],
                borderWidth: 2,
                borderRadius: 10,
                borderSkipped: true,
                categoryPercentage: 0.6
            },
        ]
    };
    // 플러그인 정의
    const condition_ChartMovePlugin = {
        id: 'moveChart',
        afterEvent(chart, args) {
            const {ctx, canvas, chartArea: {left, right, top, bottom, width, height}} = chart;

            // 마우스가 있는 좌표를 알려주는 코드
            canvas.addEventListener('mousemove', (event) => {
                const x = args.event.x;
                const y = args.event.y;

                // x,y축의 픽셀값을 설정하고 그에 따라 마우스 모양을 다르게 한다.
                if (x >= left - 80 && x <= left + 80) {
                    canvas.style.cursor = 'pointer';
                } else if (x >= right - 80 && x <= right + 80) {
                    canvas.style.cursor = 'pointer';
                } else {
                    canvas.style.cursor = 'default';
                }
            })
        },


        afterDraw(chart, args, options) {
            const {ctx, chartArea} = chart;
            const {left, right, top, bottom, width, height} = chartArea;

            class CircleChevron {
                //construcor(x1,y1) {
                //  //
                //}
                draw(ctx, x1, pixel) {
                    const angle = Math.PI / 180;

                    <!-- 일부러 방향표 빼놓은것 -->

                    // 동그라미 그리기
                    {#ctx.beginPath();#}
                    {#ctx.lineWidth = 3;#}
                    {#ctx.strokeStyle = 'rgba(102,102,102,0.5)';#}
                    {#ctx.fillStyle = 'white';#}
                    {#ctx.arc(x1, height / 2 + top + 9, 10, angle * 0, angle * 360, false);#}
                    {#ctx.stroke();#}
                    {#ctx.fill();#}
                    {#ctx.closePath();#}
                    {##}
                    {#// 화살표 그리기#}
                    {#ctx.beginPath();#}
                    {#ctx.lineWidth = 3;#}
                    {#ctx.strokeStyle = 'rgb(255,156,84)';#}
                    {#ctx.moveTo(x1 + pixel, top + height / 2 + top - 6.5);#}
                    {#ctx.lineTo(x1 - pixel, top + height / 2 + top - 1);#}
                    {#ctx.lineTo(x1 + pixel, top + height / 2 + top + 4.5);#}
                    {#ctx.stroke();#}
                    {#ctx.closePath();#}

                    <!-- 여기까지 빼놓은것 -->
                }
            }

            // 왼쪽 버튼을 그리는 코드
            let drawCircleLeft = new CircleChevron();
            drawCircleLeft.draw(ctx, left, 4);

            // 오른쪽 버튼을 그리는 코드
            let drawCircleRight = new CircleChevron();
            drawCircleRight.draw(ctx, right, -4);

            // back_스크롤 만드는 코드
            ctx.beginPath();
            ctx.fillStyle = 'rgb(255,236,177)';
            ctx.rect(left + 15, bottom + 19, width - 30, 7);
            ctx.fill();
            ctx.closePath()
            // front_스크롤 만드는 코드
            ctx.beginPath();
            ctx.fillStyle = 'rgb(252,195,140)';
            ctx.rect(left - 0.8, 0, width + 1, 2); // 메인 위쪽 테두리
            ctx.rect(left - 1, 93, width + 2, 3); // 메인 아래 테두리
            ctx.rect(left - 1, -7, 2, 126); // 메인 왼쪽 테두리
            ctx.rect(right - 1, -7, 2, 126); // 메인 오른쪽 테두리
            ctx.fill();
            ctx.closePath()

            // 양쪽 사이드에 테두리 그리기
            ctx.beginPath();
            ctx.fillStyle = 'rgb(252,195,140)';
            ctx.rect(left, bottom + 19, 15, 7); // 스크롤 왼쪽 두꺼운 테두리
            ctx.rect(right - 15, bottom + 19, 15, 7); // 스크롤 오른쪽 오른쪽 테두리
            ctx.rect(left + 15, bottom + 19, width - 30, 2); // 스크롤 위쪽 테두리
            ctx.rect(left + 15, bottom + 24, width - 30, 2); // 스크롤 아래쪽 테두리
            ctx.fill();
            ctx.closePath()

            // 칸막이 그리기
            ctx.beginPath();
            ctx.fillStyle = 'rgb(252,195,140)';
            ctx.rect(left + 39, bottom, 2, 21); // 1
            ctx.rect(left + 78, bottom, 2, 21); // 2
            ctx.rect(left + 117, bottom, 2, 21); // 3
            ctx.rect(left + 156, bottom, 2, 21); // 4
            ctx.rect(left + 195, bottom, 2, 21); // 5
            ctx.rect(left + 234, bottom, 2, 21); // 6
            ctx.fill();
            ctx.closePath()

            // movable bar
            const min = chart.options.scales.x.min;
            let startingPoint = left + 15 + width / condition_chart_data.length * min;
            const barWidth = (width - 30) / (condition_chart_data.length / 7)

            const totalWidth = startingPoint + barWidth
            if (totalWidth > width) {
                startingPoint = right - 15 - barWidth;
            }

            ctx.beginPath();
            ctx.fillStyle = 'rgb(255,255,255)';
            ctx.rect(startingPoint, bottom + 21, barWidth, 3);
            ctx.fill();
            ctx.closePath()

        }
    }


    // Chart.js 플러그인 생성
    Chart.register(condition_ChartMovePlugin);
    Chart.register(ChartDataLabels);


    var condition_ctx = document.getElementById('condition_chart').getContext('2d');
    var condition_chart = new Chart(condition_ctx, {
            type: 'bar',
            data: condition_mixedChart,
            plugins: {
                moveChart: [condition_ChartMovePlugin, ChartDataLabels] // 플러그인 활성화
            },
            options: {
                layout: {
                    padding: {
                        top: -4,
                        right: 0,
                        bottom: 20,
                    }

                },
                plugins: {
                    datalabels: {
                        padding: {top: -5},
                        align: 'start',
                        anchor: 'start',
                        color: 'orange',
                        font: {
                            weight: 600
                        },
                    },
                    tooltip: {
                        enabled: false
                    },
                    legend: {
                        display: false
                    },
                    title: {
                        display: false,
                        text: "식단과 운동",
                        fontSize: 10
                    }
                },
                scales: {
                    x: {
                        position: 'top',
                        min: 0, // 0~6은 1~7를 의미한다.
                        max: 6,

                        ticks: {
                            padding: 10,
                            font:
                                {
                                    size: 10,
                                    weight: 600
                                }
                            ,
                            color: 'orange', // 폰트 색상 변경

                        },
                        grid: {
                            display: true,
                            drawBorder: false,
                            drawOnChartArea: false, // 차트 안에서의 x축 그리드를 그려줌
                            color: 'rgb(255,156,84)',
                            drawTicks: false, // x축에 삐죽 튀어난 선을 없애줌
                        },
                        stacked: true, // 데이터 누적 시킬것인지!
                        border: {
                            display: false,
                            color: 'rgb(255,156,84)', //  위쪽 차트 테두리 색상
                            width: 2, //  위쪽 차트 테두리 굵기
                        }
                    },
                    x2: {
                        ticks: {
                            font: {
                                size: 0
                            }
                        },
                        grid: {
                            display: false,
                            drawBorder: false,
                            drawTicks: true,
                        },
                        position: 'bottom',
                        min: 0, // 0~6은 1~7를 의미한다.
                        max: 6,
                        stacked: false, // 데이터 누적 시킬것인지!
                        border: {
                            display: false,
                            color: 'rgb(252,195,140)', //  아래쪽 차트 테두리 색상
                            width: 2, //  아래쪽 차트 테두리 굵기
                        }
                    },
                    y: {
                        ticks: {
                            display: false
                        },
                        grid: {
                            display: false,
                            drawBorder: false
                        },
                        stacked: true, // 데이터 누적 시킬것인지!
                        border: {
                            color: 'rgb(255,156,84)', //  왼쪽 차트 테두리 색상
                            width: 2, //  왼쪽 차트 테두리 굵기
                        }
                    },
                    y2: {
                        position:
                            'right',
                        ticks: {
                            display: false
                        },
                        grid: {
                            display: false,
                            drawBorder: false
                        },
                        stacked: true, // 데이터 누적 시킬것인지!
                        border: {
                            color: 'rgb(255,156,84)', //  오른쪽 차트 테두리 색상
                            width: 2, //  오른쪽 차트 테두리 굵기
                        }
                    }
                }
            },
        })
    ;

    function moveScroll() {
        const {ctx, canvas, chartArea: {left, right, top, bottom, width, height}} = condition_chart;

        canvas.addEventListener('click', (event) => {
            const rect = canvas.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;
            console.log(condition_chart_data.length)
            if (x >= left - 80 && x <= left + 80) {
                condition_chart.options.scales.x.min = condition_chart.scales.x.min - 7;
                condition_chart.options.scales.x.max = condition_chart.scales.x.max - 7;
                if (condition_chart.options.scales.x.max <= 0) {
                    condition_chart.options.scales.x.min = 0;
                    condition_chart.options.scales.x.max = 6;
                }
            }

            if (x >= right - 80 && x <= right + 80) {
                condition_chart.options.scales.x.min = condition_chart.scales.x.min + 7;
                condition_chart.options.scales.x.max = condition_chart.scales.x.max + 7;
                if (condition_chart.options.scales.x.max >= condition_chart_data.length) {
                    condition_chart.options.scales.x.min = condition_chart_data.length - 7;
                    condition_chart.options.scales.x.max = condition_chart_data.length;
                }
            }
            condition_chart.update();
        })
    }

    function scrollWheel(wheel, chart) {
        if (wheel.deltaY < 0) {
            console.log(wheel.deltaY);
            condition_chart.options.scales.x.min = condition_chart.scales.x.min - 7;
            condition_chart.options.scales.x.max = condition_chart.scales.x.max - 7;
            if (condition_chart.options.scales.x.max <= 0) {
                condition_chart.options.scales.x.min = 0;
                condition_chart.options.scales.x.max = 6;
            }
        }
        if (wheel.deltaY > 0) {
            console.log(wheel.deltaY);
            condition_chart.options.scales.x.min = condition_chart.scales.x.min + 7;
            condition_chart.options.scales.x.max = condition_chart.scales.x.max + 7;
            if (condition_chart.options.scales.x.max >= condition_chart_data.length) {
                condition_chart.options.scales.x.min = condition_chart_data.length - 7;
                condition_chart.options.scales.x.max = condition_chart_data.length;
            }
        }
        condition_chart.update();
    }


    condition_chart.canvas.onclick = moveScroll;

    condition_chart.canvas.addEventListener('wheel', (e) => {
        scrollWheel(e, condition_chart)
    });

    var dragStartX = 0;
    var isDragging = false;

    {#// 마우스 다운 이벤트 및 터치 시작 이벤트 처리#}
    {#condition_chart.canvas.addEventListener('mousedown', handleDragStart);#}
    {#condition_chart.canvas.addEventListener('touchstart', handleDragStart);#}
    {##}
    {#function handleDragStart(event) {#}
    {#    if (event.type === 'mousedown') {#}
    {#        dragStartX = event.clientX;#}
    {#    } else if (event.type === 'touchstart') {#}
    {#        dragStartX = event.touches[0].clientX;#}
    {#    }#}
    {##}
    {#    isDragging = true;    }#}
    {##}
    {#// 마우스 이동 이벤트 및 터치 이동 이벤트 처리#}
    {#condition_chart.canvas.addEventListener('mousemove', handleDrag);#}
    {#condition_chart.canvas.addEventListener('touchmove', handleDrag);#}
    {##}
    {#function handleDrag(event) {#}
    {#    if (isDragging) {#}
    {#        var clientX;#}
    {##}
    {#        if (event.type === 'mousemove') {#}
    {#            clientX = event.clientX;#}
    {#        } else if (event.type === 'touchmove') {#}
    {#            clientX = event.touches[0].clientX;#}
    {#        }#}
    {##}
    {#        var deltaX = clientX - dragStartX;#}
    {#        dragStartX = clientX;#}
    {##}
    {#        // 원하는 이동 거리 및 방향에 따라 x 축 스케일 업데이트#}
    {#        var scrollStep = 7;#}
    {#        condition_chart.options.scales.x.min -= deltaX / scrollStep;#}
    {#        condition_chart.options.scales.x.max -= deltaX / scrollStep;#}
    {##}
    {#        // 최소값과 최대값을 0과 condition_chart_data.length / 7 범위로 고정#}
    {#        if (condition_chart.options.scales.x.min < 0) {#}
    {#            if (condition_chart.options.scales.x.max <= 7) {#}
    {#                condition_chart.options.scales.x.min = 0;#}
    {#                condition_chart.options.scales.x.max = 6;#}
    {#            }#}
    {#        }#}
    {#        if (condition_chart.options.scales.x.max > condition_chart_data.length) {#}
    {#            if (condition_chart.options.scales.x.max >= condition_chart_data.length) {#}
    {#                condition_chart.options.scales.x.min = condition_chart_data.length - 7;#}
    {#                condition_chart.options.scales.x.max = condition_chart_data.length;#}
    {#            }#}
    {#        }#}
    {#        condition_chart.update();}}#}
    {##}
    {#// 마우스 업 이벤트 및 터치 업 이벤트 처리#}
    {#document.addEventListener('mouseup', handleDragEnd);#}
    {#condition_chart.canvas.addEventListener('touchend', handleDragEnd);#}
    {##}
    {#function handleDragEnd() {#}
    {#    isDragging = false;}#}

    // var condition_chart = new Chart(ctx, {
    //   type: 'bar',
    //   data: condition_mixedChart,
    //   options: {
    //     legend: {
    //       display: true
    //     }
    //   }
    // });
</script>
<!--새로운 차트 -->
<script>
    const plan_point_data = [10, 20, 30, 40, 30, 40, 20];
    var ctx = document.getElementById("plan_point_chart");

    const roundedProgressBar = {
        id: 'roundedProgressBar',

    }


    var mixedChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['MON', 'TUE', 'WUE', 'TUR', 'FRI', 'SAT', 'SUN'],
            datasets: [{
                label: '몸무게',
                data: plan_point_data,
                backgroundColor: 'rgba(182,255,157,0.25)',
                borderColor: 'rgb(168,201,155)',
                borderWidth: 1,
                barPercentage: 1,
                borderSkipped: false,
                borderRadius: 10,
                categoryPercentage: 0.8
            }]
        },
        options: {
            indexAxis: 'y',
            scales: {
                x: {
                    ticks: {
                        display: false,
                        color: 'orange',
                    },
                    grid: {
                        display: false,
                        drawBorder: false
                    },
                    stacked: true
                },
                y: {
                    ticks: {
                        color: 'orange',
                        font: {
                            size: 7 // 원하는 폰트 크기로 설정
                        },
                    },
                    grid: {
                        display: false,
                        drawBorder: false
                    },
                    stacked: true
                }
            },
            plugins: {
                legend: {
                    display: false
                },
                title: {
                    display: false,
                    text: "식단과 운동",
                    fontSize: 10
                },
                roundedProgressBar: {
                    // 플러그인 옵션 설정
                }
            }
        }


    });
</script>

<!-- 애니메이션 -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>


{#주황색 테두리와 흰색 배경을 가진 박스 플렉스:컬럼 컨텐츠가 중앙으로#}











